<?php
// -------------------------
// GTâ€‘R R34 Smart Diagnosis â€“ Dataset Lengkap
// -------------------------

$dataset = [
    // ----------------- DATASET AWAL -----------------
    [
        "title"=>"Overheating / Sistem Pendingin RB26",
        "problem"=>"Mesin cepat panas, suhu air naik terutama saat boost tinggi atau lalu lintas padat.",
        "indications"=>["Level coolant rendah atau campuran tidak tepat","Kipas pendingin tidak menyala","Thermostat macet atau water pump lemah","Radiator/intercooler tersumbat"],
        "solution"=>"Periksa level & campuran coolant, radiator/intercooler, thermostat, water pump, fan & sensor suhu.",
        "steps"=>["Cek level coolant dan campurannya; tambah/ganti jika rendah atau kotor","Periksa radiator cap dan kondisi radiator","Periksa fan, relay, dan sensor suhu","Cek thermostat dan water pump; ganti jika rusak","Flush radiator/intercooler jika tersumbat","Bleed sistem pendingin untuk buang udara","Cek head gasket jika overheating berulang"],
        "keywords"=>["overheat","panas","coolant","radiator","water pump","thermostat","fan"]
    ],
    [
        "title"=>"Turbo Lag / Boost Leak",
        "problem"=>"Respon turbo lambat, kehilangan boost, muncul suara 'hissing'.",
        "indications"=>["Suara 'hissing' saat akselerasi boost","Boost gauge drop tiba-tiba","Coupler intercooler kendor atau berbalon"],
        "solution"=>"Periksa semua coupler intercooler & turbo, hose vakum, clamp, intercooler core.",
        "steps"=>["Dengarkan suara 'hissing' saat boost","Periksa coupler intercooler & turbo; pastikan kencang","Periksa hose vakum dan vacuum line; ganti yang retak","Pressure test intake/intercooler","Cek kondisi turbo, shaft play, oil supply"],
        "keywords"=>["turbo","lag","boost","hissing","intercooler","coupler"]
    ],
    [
        "title"=>"Ignition Coil / Misfire",
        "problem"=>"Idle tidak stabil, backfire, tenaga drop.",
        "indications"=>["Pemeriksaan busi menunjukkan aus atau kotor","Engine scan error P0300-P0306","Tenaga drop saat akselerasi"],
        "solution"=>"Ganti coil pack yang lemah, ganti busi, cek wiring & ground.",
        "steps"=>["Cek busi: warna dan kondisi electrode","Periksa coil pack: ukur resistansi","Periksa wiring & ground coil","Ganti coil dan busi jika perlu","Tes idle dan performa setelah penggantian"],
        "keywords"=>["coil","misfire","busi","backfire","idle"]
    ],
    [
        "title"=>"Fuel Pump Lemah / Tekanan Tidak Stabil",
        "problem"=>"Tenaga drop saat high boost, stuttering.",
        "indications"=>["Tekanan bahan bakar rendah saat high load","Relay fuel pump panas atau bau terbakar","Filter bensin tersumbat"],
        "solution"=>"Periksa tekanan bahan bakar, relay, filter, ganti fuel pump jika lemah.",
        "steps"=>["Ukur tekanan bahan bakar saat idle & full load","Periksa relay fuel pump & fuse","Cek filter bensin, bersihkan/ganti jika tersumbat","Ganti fuel pump jika tekanan drop saat high boost"],
        "keywords"=>["fuel","pump","pressure","high boost","relay","filter"]
    ],
    [
        "title"=>"Gearbox Crunch / Synchro Rusak",
        "problem"=>"Suara grinding saat masuk gigi, susah masuk gigi 2/3.",
        "indications"=>["Grinding saat shifting ke gigi 2 atau 3","Oli gearbox sudah lama atau gelap","Perpindahan gigi terasa kasar"],
        "solution"=>"Periksa oli gearbox, ganti oli, rebuild transmisi jika synchro aus.",
        "steps"=>["Cek level & jenis oli gearbox","Ganti oli sesuai rekomendasi","Masuk gigi pelan-pelan, dengarkan grinding","Jika synchro aus, rebuild transmisi"],
        "keywords"=>["gearbox","synchro","grinding","gigi","transmisi","oli"]
    ],
    [
        "title"=>"Clutch Slip",
        "problem"=>"RPM naik tapi mobil tidak maju sesuai, terutama saat high boost.",
        "indications"=>["Pedal kopling lebih lembek atau travel bertambah","RPM naik tapi akselerasi kurang","Hydraulic master/slave bermasalah"],
        "solution"=>"Periksa wear plate, pressure plate, flywheel, hydraulic system; ganti kopling jika aus.",
        "steps"=>["Tes akselerasi, perhatikan RPM vs akselerasi","Cek hydraulic master/slave cylinder","Periksa wear plate, pressure plate, flywheel","Ganti kopling sesuai stage mesin","Bleed sistem hidrolik jika hydraulic slip"],
        "keywords"=>["kopling","slip","RPM","hydraulic","pressure plate","flywheel"]
    ],
    [
        "title"=>"Vacuum Leak / Idle Tidak Stabil",
        "problem"=>"Idle drop, suara hiss, boost tidak stabil.",
        "indications"=>["Suara hiss di throttle body saat idle","Hose vakum atau coupler intake retak/kendor","Boost tidak stabil"],
        "solution"=>"Periksa semua hose vakum, gasket, lakukan smoke test.",
        "steps"=>["Dengarkan suara hiss saat idle","Periksa hose vakum, gasket, coupler","Lakukan smoke test jika perlu","Ganti gasket/hose bocor","Cek kembali idle dan boost response"],
        "keywords"=>["vacuum","hiss","idle","boost","gasket","hose"]
    ],
    [
        "title"=>"Electrical / ECU & Wiring Faults",
        "problem"=>"MFD mati, immobiliser tidak bekerja, ECU error, panel instrumen rusak.",
        "indications"=>["Fuse atau relay terbakar","Ground bodi mesin korosi/lepas","Scanner menunjukkan error ECU"],
        "solution"=>"Periksa sambungan ground & kabel baterai, fuse & relay, modul ECU/immobiliser, ganti panel instrumen jika rusak.",
        "steps"=>["Periksa terminal baterai dan bersihkan kontak","Cek fuse dan relay terkait ECU","Periksa kabel ground bodi mesin & rangka","Gunakan scanner diagnostic untuk membaca error ECU","Ganti panel instrumen atau MFD jika rusak"],
        "keywords"=>["ECU","immobiliser","panel","MFD","wiring","fuse","relay"]
    ],

    // ----------------- TAHAP 1 -----------------
    [
        "title"=>"Radiator / Coolant Leak",
        "problem"=>"Kebocoran pada radiator atau selang coolant menyebabkan mesin cepat panas.",
        "indications"=>["Cairan coolant menetes di bawah mobil","Suhu mesin naik cepat","Aroma panas atau coolant terbakar"],
        "solution"=>"Periksa semua selang, clamp, dan radiator; ganti bagian yang bocor.",
        "steps"=>["Periksa selang & clamp radiator","Cek radiator untuk retak atau bocor","Ganti bagian yang rusak","Isi ulang coolant dan bleed sistem"],
        "keywords"=>["radiator","coolant","selang","bocor","panas"]
    ],
    [
        "title"=>"Intercooler Clogged",
        "problem"=>"Intercooler tersumbat menurunkan performa dan membuat turbo lambat.",
        "indications"=>["Boost naik lambat","Tenaga drop saat high rpm","Check boost leak muncul"],
        "solution"=>"Bersihkan intercooler atau ganti jika tersumbat parah.",
        "steps"=>["Lepas intercooler","Cuci dengan pressure air atau chemical cleaner","Pasang kembali dan cek boost"],
        "keywords"=>["intercooler","boost","turbo","tersumbat","tenaga"]
    ],
    [
        "title"=>"Water Pump Failure",
        "problem"=>"Water pump aus menyebabkan pendinginan mesin tidak optimal.",
        "indications"=>["Mesin cepat panas","Suara berdecit dari pompa","Coolant sirkulasi lambat"],
        "solution"=>"Ganti water pump dan periksa pulley serta belt.",
        "steps"=>["Lepas pompa lama","Pasang pompa baru dan seal","Periksa belt dan pulley","Isi coolant dan bleed"],
        "keywords"=>["water pump","pendingin","panas","belt","pulley"]
    ],
    [
        "title"=>"Oil Leak / Seal Rusak",
        "problem"=>"Bocornya oli mesin, gearbox, atau differential.",
        "indications"=>["Oli menetes di bawah mobil","Level oli cepat berkurang","Bau oli terbakar"],
        "solution"=>"Periksa gasket, seal, dan cover; ganti yang bocor.",
        "steps"=>["Identifikasi sumber bocor","Ganti gasket atau seal yang rusak","Periksa level oli setelah penggantian"],
        "keywords"=>["oil","bocor","gasket","seal","differential"]
    ],
    [
        "title"=>"Battery / Alternator Issue",
        "problem"=>"Baterai cepat habis atau alternator tidak mengisi.",
        "indications"=>["Lampu dashboard redup","Mobil sulit starter","Multimeter menunjukkan tegangan <12V saat idle"],
        "solution"=>"Periksa alternator, kabel, dan baterai; ganti jika rusak.",
        "steps"=>["Tes baterai dengan multimeter","Periksa kabel & terminal","Tes alternator output","Ganti komponen yang rusak"],
        "keywords"=>["battery","alternator","tegangan","starter","lampu"]
    ],
    [
        "title"=>"Exhaust Leak",
        "problem"=>"Kebocoran pada manifold atau pipa knalpot.",
        "indications"=>["Suara berisik / mendesis di bawah kap","Tenaga mesin sedikit drop","Bau gas keluar dari ruang mesin"],
        "solution"=>"Periksa exhaust gasket dan pipa, kencangkan atau ganti.",
        "steps"=>["Identifikasi titik bocor","Ganti gasket atau pipa","Cek kembali suara dan tenaga"],
        "keywords"=>["exhaust","bocor","manifold","suara","gas"]
    ],
    [
        "title"=>"Brake Wear / Disc & Pad",
        "problem"=>"Rem aus menyebabkan braking tidak optimal.",
        "indications"=>["Pedal rem terasa empuk","Rem berdecit","Jarak berhenti lebih panjang"],
        "solution"=>"Periksa disc dan pad; ganti jika aus.",
        "steps"=>["Cek ketebalan pad & disc","Ganti pad atau disc jika tipis/aus","Bleed sistem rem"],
        "keywords"=>["rem","brake","disc","pad","aus"]
    ],
    [
        "title"=>"Suspension / Shock Absorber",
        "problem"=>"Shock absorber atau bushing aus, getaran dan handling buruk.",
        "indications"=>["Getaran saat jalan tidak rata","Mobil limbung di tikungan","Bunyi knocking di suspensi"],
        "solution"=>"Ganti shock absorber atau bushing yang aus.",
        "steps"=>["Cek kondisi shock absorber & bushing","Ganti komponen yang rusak","Test handling mobil"],
        "keywords"=>["suspension","shock","bushing","getar","handling"]
    ],
    [
        "title"=>"Wheel Alignment / Tire Wear",
        "problem"=>"Kemudi miring atau keausan ban tidak merata.",
        "indications"=>["Kemudi terasa tarik ke satu sisi","Ban aus tidak merata","Handling tidak stabil"],
        "solution"=>"Lakukan wheel alignment dan periksa tekanan ban.",
        "steps"=>["Periksa tekanan ban","Lakukan wheel alignment","Cek apakah gejala hilang"],
        "keywords"=>["alignment","ban","steering","aus","handling"]
    ],
    [
        "title"=>"Differential / LSD Issue",
        "problem"=>"LSD aus atau gigi differential aus menyebabkan suara aneh dan slip saat cornering.",
        "indications"=>["Suara klik atau grind saat cornering","Slip saat akselerasi keluar tikungan","Minyak diferensial bocor"],
        "solution"=>"Periksa differential, ganti oli dan komponen aus.",
        "steps"=>["Cek suara differential saat test drive","Periksa oli dan seal differential","Ganti komponen yang aus","Isi oli baru sesuai spec"],
        "keywords"=>["differential","LSD","slip","grind","oli"]
    ],

    // ----------------- TAHAP 2 -----------------
    [
        "title"=>"Fuel Injector Clogged",
        "problem"=>"Injector tersumbat menyebabkan mesin tersendat atau misfire.",
        "indications"=>["Idle tidak stabil","Tenaga drop saat akselerasi","Engine scan error P0300-P0306"],
        "solution"=>"Bersihkan injector atau ganti jika rusak.",
        "steps"=>["Gunakan fuel injector cleaner","Periksa spray pattern injector","Ganti injector jika masih bermasalah","Test performa mesin"],
        "keywords"=>["injector","fuel","misfire","tenaga","idle"]
    ],
    [
        "title"=>"Turbo Oil Seal Leak",
        "problem"=>"Seal turbo bocor menyebabkan asap biru atau putih dari knalpot.",
        "indications"=>["Asap biru atau putih saat akselerasi","Minyak turbo berkurang","Turbo noise meningkat"],
        "solution"=>"Ganti oil seal turbo dan periksa bearing.",
        "steps"=>["Periksa oil feed & return line","Ganti turbo seal & bearing","Isi ulang oli turbo","Cek performa turbo"],
        "keywords"=>["turbo","seal","bocor","asap","oli"]
    ],
    [
        "title"=>"Catalytic Converter Clogged",
        "problem"=>"Catalytic converter tersumbat menyebabkan tenaga drop dan check engine menyala.",
        "indications"=>["Tenaga drop terutama di high rpm","Check engine menyala","Exhaust backpressure tinggi"],
        "solution"=>"Cuci catalytic converter atau ganti jika tersumbat parah.",
        "steps"=>["Test backpressure exhaust","Cuci catalytic converter","Ganti jika masih tersumbat","Test performa mesin"],
        "keywords"=>["catalytic","converter","tenaga","backpressure","exhaust"]
    ],
    [
        "title"=>"Air Conditioning / AC Problem",
        "problem"=>"AC tidak dingin atau blower tidak bekerja.",
        "indications"=>["Blower tidak keluar udara","Udara tidak dingin","Suara berdecit saat AC menyala"],
        "solution"=>"Periksa kompresor, refrigerant, fan, dan kabel listrik AC.",
        "steps"=>["Periksa level refrigerant","Tes kompresor AC","Cek blower & motor fan","Periksa wiring dan fuse AC"],
        "keywords"=>["AC","blower","refrigerant","kompresor","dingin"]
    ],
    [
        "title"=>"ECU / Sensor Malfunction",
        "problem"=>"Sensor atau ECU rusak menyebabkan engine warning atau idle bermasalah.",
        "indications"=>["Check engine menyala","Idle tidak stabil","Error sensor di scanner"],
        "solution"=>"Periksa sensor utama (MAP, TPS, O2) dan koneksi ECU.",
        "steps"=>["Gunakan OBD2 scanner untuk baca error","Periksa koneksi kabel sensor & ECU","Ganti sensor yang rusak","Reset ECU dan test idle/performa"],
        "keywords"=>["ECU","sensor","TPS","MAP","O2","idle"]
    ],
    [
        "title"=>"Immobiliser / Key Fault",
        "problem"=>"Mobil tidak bisa start karena immobiliser bermasalah.",
        "indications"=>["Engine tidak menyala saat kunci diputar","Lampu immobiliser berkedip","Scanner menunjukkan error immobiliser"],
        "solution"=>"Reset immobiliser atau ganti kunci/receiver.",
        "steps"=>["Periksa baterai kunci & receiver","Reset immobiliser sesuai manual","Ganti kunci atau receiver jika masih bermasalah"],
        "keywords"=>["immobiliser","key","start","engine","error"]
    ],
    [
        "title"=>"MFD / Dashboard Display Failure",
        "problem"=>"MFD atau panel instrumen tidak menampilkan data atau mati.",
        "indications"=>["Tampilan MFD mati atau berkedip","Beberapa indikator tidak menyala","Error code muncul di scanner"],
        "solution"=>"Periksa koneksi listrik MFD, ganti fuse atau modul MFD.",
        "steps"=>["Cek koneksi kabel & fuse MFD","Test voltase input MFD","Ganti modul MFD jika rusak"],
        "keywords"=>["MFD","dashboard","display","panel","listrik"]
    ],
    [
        "title"=>"Vacuum Pump / Hose Leak",
        "problem"=>"Hose vakum bocor menyebabkan boost tidak stabil dan brake assist kurang.",
        "indications"=>["Boost tidak stabil","Brake pedal lebih keras","Suara hiss dari selang vakum"],
        "solution"=>"Periksa semua hose vakum, ganti yang bocor.",
        "steps"=>["Dengarkan suara hiss saat idle","Periksa semua hose vakum dan konektor","Ganti hose atau gasket bocor","Cek boost dan brake assist"],
        "keywords"=>["vacuum","hose","boost","brake","hiss"]
    ],
    [
        "title"=>"Throttle Body / Sensor TPS Issue",
        "problem"=>"Throttle body atau TPS bermasalah menyebabkan throttle lag atau idle drop.",
        "indications"=>["Idle drop","Throttle respon lambat","Engine warning muncul"],
        "solution"=>"Bersihkan throttle body dan periksa sensor TPS.",
        "steps"=>["Bersihkan throttle body dari karbon","Tes sensor TPS dengan multimeter","Ganti TPS jika error","Reset ECU dan test throttle respon"],
        "keywords"=>["throttle","TPS","idle","lag","sensor"]
    ],
    [
        "title"=>"Exhaust Manifold Crack",
        "problem"=>"Crack pada manifold menyebabkan suara berisik dan loss tenaga.",
        "indications"=>["Suara berdecit saat engine panas","Tenaga drop","Asap tipis keluar dari celah manifold"],
        "solution"=>"Periksa manifold, las atau ganti jika retak.",
        "steps"=>["Lepas manifold dan periksa retak","Las atau ganti manifold","Cek kembali suara & performa"],
        "keywords"=>["manifold","crack","exhaust","tenaga","suara"]
    ]
];

// -------------------------
// PREPROCESS & COSINE SIMILARITY
// -------------------------
function preprocess($text) {
    $text = strtolower(trim($text));
    $text = preg_replace("/[^a-z0â€‘9\s]/u"," ",$text);
    $words = preg_split('/\s+/',$text,-1,PREG_SPLIT_NO_EMPTY);
    $stopwords = ["dan","yang","pada","saat","karena","itu","di","ke","dengan","atau","adalah","untuk","dari","ada","saya","kamu","mobil"];
    $filtered=[];
    foreach($words as $w){ if(strlen($w)>1 && !in_array($w,$stopwords)) $filtered[]=$w; }
    return array_values($filtered);
}
function to_freq_vector($tokens){ $freq=array_count_values($tokens); ksort($freq); return $freq; }
function cosine_similarity($tokensA,$tokensB){
    if(!$tokensA || !$tokensB) return 0.0;
    $vecA = to_freq_vector($tokensA);
    $vecB = to_freq_vector($tokensB);
    $dot = 0; $normA = 0; $normB = 0;
    foreach($vecA as $term=>$countA){
        $normA += $countA*$countA;
        $countB = isset($vecB[$term]) ? $vecB[$term] : 0;
        $dot += $countA*$countB;
    }
    foreach($vecB as $countB){ $normB += $countB*$countB; }
    if($normA == 0 || $normB == 0) return 0.0;
    return $dot / (sqrt($normA)*sqrt($normB));
}

function confidence_color($score){
    if($score > 0.7) return "#4CAF50";
    if($score > 0.4) return "#FFC107";
    return "#F44336";
}

// -------------------------
// HANDLE INPUT
// -------------------------
$user_query = $_POST['question_search'] ?? "";
$selected_index = $_POST['category_select'] ?? null;
$search_result = null;
$category_result = null;
$confidence = null;

if($user_query){
    $tokens = preprocess($user_query);
    $best_score = 0;
    foreach($dataset as $item){
        $problem_tokens = preprocess($item["problem"] . " " . $item["title"]);
        $score = cosine_similarity($tokens, $problem_tokens);
        if($score > $best_score){
            $best_score = $score;
            $search_result = $item;
        }
    }
    $confidence = $best_score;
} elseif($selected_index !== null && $selected_index !== ""){
    $category_result = $dataset[$selected_index];
}
?>
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GTâ€‘R R34 Smart Diagnosis â€“ Tabs Lengkap</title>
<style>
body{font-family:Arial,sans-serif;background:#0b0b0b;color:#fff;margin:0;padding:0;}
header{background:#e21b23;padding:18px;text-align:center;font-size:24px;font-weight:bold;}
.container{max-width:900px;margin:30px auto;padding:20px;background:#111;border-radius:12px;box-shadow:0 0 15px rgba(226,27,35,0.5);}
.tabs{display:flex;margin-bottom:15px;}
.tab{flex:1;padding:12px;text-align:center;background:#222;cursor:pointer;border-radius:8px 8px 0 0;margin-right:2px;}
.tab.active{background:#e21b23;font-weight:bold;}
.tab-content{display:none;background:#1a1a1a;padding:15px;border-radius:0 0 8px 8px;}
input,select,button{width:100%;padding:12px;margin:8px 0;border-radius:8px;border:none;font-size:16px;}
input,select{background:#222;color:#fff;}
button{background:#e21b23;color:#fff;cursor:pointer;transition:0.3s;}
button:hover{background:#ff2a33;}
.answer{margin-top:20px;padding:15px;background:#111;border-left:5px solid #e21b23;border-radius:8px;}
.title{font-size:20px;font-weight:bold;color:#e21b23;}
.confidence{font-size:14px;margin-top:6px;font-weight:bold;padding:4px 8px;border-radius:4px;display:inline-block;}
.steps li{margin-bottom:6px;}
</style>
<script>
function openTab(evt, tabName){
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tab-content");
    for(i=0;i<tabcontent.length;i++){ tabcontent[i].style.display="none"; }
    tablinks = document.getElementsByClassName("tab");
    for(i=0;i<tablinks.length;i++){ tablinks[i].className = tablinks[i].className.replace(" active",""); }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
}
window.onload = function(){
    document.getElementsByClassName("tab")[0].click();
};
</script>
</head>
<body>
<header>ðŸ”§ GTâ€‘R R34 Smart Diagnosis</header>
<div class="container">
<div class="tabs">
<div class="tab" onclick="openTab(event,'Search')">Cari Gejala</div>
<div class="tab" onclick="openTab(event,'Category')">Pilih Kategori</div>
</div>

<div id="Search" class="tab-content">
<form method="POST">
<label>Ketik gejala masalah:</label>
<input type="text" name="question_search" placeholder="contoh: mobil saya overheating atau suara grinding saat ganti gigi" value="<?= htmlspecialchars($user_query) ?>">
<button type="submit">Cari</button>
</form>
<?php if($search_result): ?>
<div class="answer">
<div class="title"><?= htmlspecialchars($search_result["title"]) ?></div>
<div class="confidence" style="background:<?= confidence_color($confidence) ?>;">
Confidence: <?= round($confidence,3) ?>
</div>
<p><strong>Indikasi Awal:</strong><br><?= nl2br(htmlspecialchars(implode("\n",$search_result["indications"]))) ?></p>
<p><strong>Deskripsi:</strong><br><?= htmlspecialchars($search_result["problem"]) ?></p>
<p><strong>Solusi:</strong><br><?= htmlspecialchars($search_result["solution"]) ?></p>
<p><strong>Stepâ€‘byâ€‘Step:</strong></p>
<ol class="steps"><?php foreach($search_result["steps"] as $s){ echo "<li>".htmlspecialchars($s)."</li>"; } ?></ol>
</div>
<?php endif; ?>
</div>

<div id="Category" class="tab-content">
<form method="POST">
<label>Pilih kategori masalah:</label>
<select name="category_select">
<option value="">-- Pilih Masalah --</option>
<?php foreach($dataset as $i=>$item): ?>
<option value="<?= $i ?>" <?= ($selected_index === (string)$i)? 'selected' : '' ?>>
<?= htmlspecialchars($item["title"]) ?></option>
<?php endforeach; ?>
</select>
<button type="submit">Cari</button>
</form>
<?php if($category_result): ?>
<div class="answer">
<div class="title"><?= htmlspecialchars($category_result["title"]) ?></div>
<p><strong>Indikasi Awal:</strong><br><?= nl2br(htmlspecialchars(implode("\n",$category_result["indications"]))) ?></p>
<p><strong>Deskripsi:</strong><br><?= htmlspecialchars($category_result["problem"]) ?></p>
<p><strong>Solusi:</strong><br><?= htmlspecialchars($category_result["solution"]) ?></p>
<p><strong>Stepâ€‘byâ€‘Step:</strong></p>
<ol class="steps"><?php foreach($category_result["steps"] as $s){ echo "<li>".htmlspecialchars($s)."</li>"; } ?></ol>
</div>
<?php endif; ?>
</div>
</div>
</body>
</html>
