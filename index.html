<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GTâ€‘R R34 Smart Diagnosis â€“ Tabs Lengkap</title>
<style>
body{font-family:Arial,sans-serif;background:#0b0b0b;color:#fff;margin:0;padding:0;}
header{background:#e21b23;padding:18px;text-align:center;font-size:24px;font-weight:bold;}
.container{max-width:900px;margin:30px auto;padding:20px;background:#111;border-radius:12px;box-shadow:0 0 15px rgba(226,27,35,0.5);}
.tabs{display:flex;margin-bottom:15px;}
.tab{flex:1;padding:12px;text-align:center;background:#222;cursor:pointer;border-radius:8px 8px 0 0;margin-right:2px;}
.tab.active{background:#e21b23;font-weight:bold;}
.tab-content{display:none;background:#1a1a1a;padding:15px;border-radius:0 0 8px 8px;}
input,select,button{width:100%;padding:12px;margin:8px 0;border-radius:8px;border:none;font-size:16px;}
input,select{background:#222;color:#fff;}
button{background:#e21b23;color:#fff;cursor:pointer;transition:0.3s;}
button:hover{background:#ff2a33;}
.answer{margin-top:20px;padding:15px;background:#111;border-left:5px solid #e21b23;border-radius:8px;}
.title{font-size:20px;font-weight:bold;color:#e21b23;}
.confidence{font-size:14px;margin-top:6px;font-weight:bold;padding:4px 8px;border-radius:4px;display:inline-block;}
.steps li{margin-bottom:6px;}
</style>
</head>
<body>
<header>ðŸ”§ GTâ€‘R R34 Smart Diagnosis</header>
<div class="container">
<div class="tabs">
<div class="tab" onclick="openTab(event,'Search')">Cari Gejala</div>
<div class="tab" onclick="openTab(event,'Category')">Pilih Kategori</div>
</div>

<div id="Search" class="tab-content">
<label>Ketik gejala masalah:</label>
<input type="text" id="searchInput" placeholder="contoh: mobil saya overheating atau suara grinding saat ganti gigi">
<button onclick="searchProblem()">Cari</button>
<div id="searchResult"></div>
</div>

<div id="Category" class="tab-content">
<label>Pilih kategori masalah:</label>
<select id="categorySelect">
<option value="">-- Pilih Masalah --</option>
</select>
<button onclick="showCategory()">Cari</button>
<div id="categoryResult"></div>
</div>
</div>

<script>
// Dataset
const dataset = [
    {
        "title":"Overheating / Sistem Pendingin RB26",
        "problem":"Mesin cepat panas, suhu air naik terutama saat boost tinggi atau lalu lintas padat.",
        "indications":["Level coolant rendah atau campuran tidak tepat","Kipas pendingin tidak menyala","Thermostat macet atau water pump lemah","Radiator/intercooler tersumbat"],
        "solution":"Periksa level & campuran coolant, radiator/intercooler, thermostat, water pump, fan & sensor suhu.",
        "steps":["Cek level coolant dan campurannya; tambah/ganti jika rendah atau kotor","Periksa radiator cap dan kondisi radiator","Periksa fan, relay, dan sensor suhu","Cek thermostat dan water pump; ganti jika rusak","Flush radiator/intercooler jika tersumbat","Bleed sistem pendingin untuk buang udara","Cek head gasket jika overheating berulang"]
    },
    {
        "title":"Turbo Lag / Boost Leak",
        "problem":"Respon turbo lambat, kehilangan boost, muncul suara 'hissing'.",
        "indications":["Suara 'hissing' saat akselerasi boost","Boost gauge drop tiba-tiba","Coupler intercooler kendor atau berbalon"],
        "solution":"Periksa semua coupler intercooler & turbo, hose vakum, clamp, intercooler core.",
        "steps":["Dengarkan suara 'hissing' saat boost","Periksa coupler intercooler & turbo; pastikan kencang","Periksa hose vakum dan vacuum line; ganti yang retak","Pressure test intake/intercooler","Cek kondisi turbo, shaft play, oil supply"]
    }
    // Tambahkan seluruh dataset lain di sini sesuai PHP
];

// Isi dropdown kategori
const categorySelect = document.getElementById("categorySelect");
dataset.forEach((item,i)=>{
    const opt = document.createElement("option");
    opt.value = i;
    opt.textContent = item.title;
    categorySelect.appendChild(opt);
});

// Tab Function
function openTab(evt, tabName){
    const tabcontent = document.getElementsByClassName("tab-content");
    for(let i=0;i<tabcontent.length;i++) tabcontent[i].style.display="none";
    const tablinks = document.getElementsByClassName("tab");
    for(let i=0;i<tablinks.length;i++) tablinks[i].className = tablinks[i].className.replace(" active","");
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
}
window.onload = function(){ document.getElementsByClassName("tab")[0].click(); };

// Simple search (keyword contains)
function searchProblem(){
    const query = document.getElementById("searchInput").value.toLowerCase();
    let resultHTML = '';
    let found = false;
    dataset.forEach(item=>{
        const text = (item.title + ' ' + item.problem).toLowerCase();
        if(text.includes(query)){
            resultHTML = formatAnswer(item);
            found = true;
        }
    });
    if(!found) resultHTML = '<p>Tidak ada hasil yang cocok.</p>';
    document.getElementById("searchResult").innerHTML = resultHTML;
}

function showCategory(){
    const index = categorySelect.value;
    if(index==='') return;
    const item = dataset[index];
    document.getElementById("categoryResult").innerHTML = formatAnswer(item);
}

function formatAnswer(item){
    let html = `<div class="answer"><div class="title">${item.title}</div>`;
    if(item.indications) html += `<p><strong>Indikasi Awal:</strong><br>${item.indications.join('<br>')}</p>`;
    if(item.problem) html += `<p><strong>Deskripsi:</strong><br>${item.problem}</p>`;
    if(item.solution) html += `<p><strong>Solusi:</strong><br>${item.solution}</p>`;
    if(item.steps){
        html += `<p><strong>Stepâ€‘byâ€‘Step:</strong></p><ol class="steps">`;
        item.steps.forEach(s=> html += `<li>${s}</li>`);
        html += `</ol>`;
    }
    html += `</div>`;
    return html;
}
</script>
</body>
</html>
